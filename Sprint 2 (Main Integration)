#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <ctype.h>

int runPracticeRound(char selection, int *numProblems, int *correctAnswers) {
    int result = 0;

    switch (selection) {
        case 'A':
            result = additionPractice();
            break;
        case 'B':
            result = subtractionPractice();
            break;
        case 'C':
            result = multiplicationPractice(); // from Sprint 3
            break;
        case 'D':
            result = divisionPractice(); // from Sprint 3
            break;
        case 'E':
            // On exit: show stats and save them (Sprint 3 write function)
            showStatistics(*numProblems, *correctAnswers);
            writeStatsToFile("stats.txt", *numProblems, *correctAnswers);
            return -1;

        default:
            printf("Please enter a valid letter.\n");
            return 0;
    }

    // A, B, C, D all count as a problem attempt
    (*numProblems)++;
    if (result == 1) (*correctAnswers)++;

    // Optional: also save after each problem attempt (shows progress)
    writeStatsToFile("stats.txt", *numProblems, *correctAnswers);

    return 1;
}

void showStatistics(int numProblems, int correctAnswers) {
    printf("\nThanks for using Jenice Curry's Math Practice Program.\n");
    printf("You attempted %d problems and got %d correct.\n", numProblems, correctAnswers);

    if (numProblems > 0) {
        float percent = ((float)correctAnswers / numProblems) * 100.0f;
        printf("For a percentage correct of %.2f%%.\n", percent);
    }
}
