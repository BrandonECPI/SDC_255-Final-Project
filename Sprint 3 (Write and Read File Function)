#include <stdio.h>
#include "file_io.h"

void writeStatsToFile(const char *filename, int numProblems, int correctAnswers) {
    FILE *fp = NULL;

    // Using fopen_s for MSVC. If not using MSVC, replace with: fp = fopen(filename, "w");
    if (fopen_s(&fp, filename, "w") != 0 || fp == NULL) {
        return; // silently fail to keep UX simple
    }

    // Very simple format: two integers
    fprintf(fp, "%d %d\n", numProblems, correctAnswers);
    fclose(fp);
}

int readStatsFromFile(const char *filename, int *numProblems, int *correctAnswers) {
    FILE *fp = NULL;

    // Using fopen_s for MSVC. If not using MSVC, replace with: fp = fopen(filename, "r");
    if (fopen_s(&fp, filename, "r") != 0 || fp == NULL) {
        return 0;
    }

    if (fscanf(fp, "%d %d", numProblems, correctAnswers) != 2) {
        fclose(fp);
        return 0;
    }

    fclose(fp);
    return 1;
}
